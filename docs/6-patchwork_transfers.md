# Patchwork Transfers

[_Documentation generated by Documatic_](https://www.documatic.com)

<!---Documatic-section-Codebase Structure-start--->
## Codebase Structure

<!---Documatic-block-system_architecture-start--->
```mermaid
None
```
<!---Documatic-block-system_architecture-end--->

# #
<!---Documatic-section-Codebase Structure-end--->

<!---Documatic-section-patchwork.transfers.rsync-start--->
## [patchwork.transfers.rsync](6-patchwork_transfers.md#patchwork.transfers.rsync)

<!---Documatic-section-rsync-start--->
<!---Documatic-block-patchwork.transfers.rsync-start--->
<details>
	<summary><code>patchwork.transfers.rsync</code> code snippet</summary>

```python
def rsync(c, source, target, exclude=(), delete=False, strict_host_keys=True, rsync_opts='', ssh_opts=''):
    if isinstance(exclude, six.string_types):
        exclude = [exclude]
    exclude_opts = ' --exclude "{}"' * len(exclude)
    exclusions = tuple([str(s).replace('"', '\\\\"') for s in exclude])
    key_string = ''
    keys = c.connect_kwargs.get('key_filename', [])
    if isinstance(keys, six.string_types):
        keys = [keys]
    if keys:
        key_string = '-i ' + ' -i '.join(keys)
    (user, host, port) = (c.user, c.host, c.port)
    port_string = '-p {}'.format(port)
    rsh_string = ''
    disable_keys = '-o StrictHostKeyChecking=no'
    if not strict_host_keys and disable_keys not in ssh_opts:
        ssh_opts += ' {}'.format(disable_keys)
    rsh_parts = [key_string, port_string, ssh_opts]
    if any(rsh_parts):
        rsh_string = "--rsh='ssh {}'".format(' '.join(rsh_parts))
    options_map = {'delete': '--delete' if delete else '', 'exclude': exclude_opts.format(*exclusions), 'rsh': rsh_string, 'extra': rsync_opts}
    options = '{delete}{exclude} -pthrvz {extra} {rsh}'.format(**options_map)
    if host.count(':') > 1:
        cmd = 'rsync {} {} [{}@{}]:{}'
    else:
        cmd = 'rsync {} {} {}@{}:{}'
    cmd = cmd.format(options, source, user, host, target)
    return c.local(cmd)
```
</details>
<!---Documatic-block-patchwork.transfers.rsync-end--->
<!---Documatic-section-rsync-end--->

# #
<!---Documatic-section-patchwork.transfers.rsync-end--->

[_Documentation generated by Documatic_](https://www.documatic.com)